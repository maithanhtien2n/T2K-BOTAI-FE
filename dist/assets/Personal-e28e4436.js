import{b as N,c as z,a as S,u as L,_ as B}from"./InputTextValidate-d55a5043.js";import{o,d as r,e as t,s as f,t as y,v as O,c as D,x as P,y as k,g as i,z as j,A as w,f as u,B as C,C as U,_ as F,E as I,r as M,m as G,G as R,H as T,b as A,I as E,J,K as H}from"./index-1b2f3aee.js";const K={class:"flex gap-2 align-items-center"},Y={class:"text-custom-1 text-800"},W={__name:"IconTitle",props:{icon:{type:String,required:!1,default:""},title:{type:String,required:!1,default:""}},setup(m){return(g,e)=>(o(),r("div",K,[t("i",{class:f(["text-700 text-2xl",m.icon])},null,2),t("span",Y,y(m.title),1)]))}},Q={class:"p-error"},X={class:"flex flex-column gap-1"},Z={key:0,class:"pi pi-plus"},ee={key:1,class:"flex flex-column gap-1 align-items-center"},te=t("i",{class:"pi pi-camera text-2xl"},null,-1),ae=["accept","onDrop"],se={class:"flex flex-column gap-1"},le=t("span",null,"Đang tải...",-1),ne=["src"],oe={key:1,class:"w-full h-full",controls:""},re=["src"],ie={key:2,class:"w-full h-full flex align-items-center justify-content-center"},ce={class:"flex flex-column"},ue=t("img",{class:"w-10rem h-10rem object-fit-cover",src:"https://cdn1.iconfinder.com/data/icons/fs-icons-ubuntu-by-franksouza-/512/application-x-rar.png",alt:"Lỗi ảnh"},null,-1),de={class:"p-error"},pe={__name:"ImageValidate",props:{name:{type:String,required:!0,default:""},label:{type:String,required:!1,default:""},class:{type:String,required:!1,default:"w-12rem h-12rem"},style:{type:Object,required:!1,default:()=>{}},disabled:{type:Boolean,required:!1,default:!1},miniSize:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!0},imageProps:{type:Object,required:!1,default:()=>({maxSize:100,accept:"image/*",type:"JPG,JPEG,PNG"})}},emits:["onUpload","onRemove"],setup(m,{emit:g}){const e=m,{value:n,errorMessage:h,setErrors:_,setValue:q}=N(e.name),d=O(!1),p=a=>{const l=a/1048576;return Number(l%1===0?l.toFixed(0):l.toFixed(2))},x=a=>{var l,b;if(p(a.target.files[0].size)>Number((l=e==null?void 0:e.imageProps)==null?void 0:l.maxSize))return _(`Dung lượng tệp không được vượt quá ${(b=e==null?void 0:e.imageProps)==null?void 0:b.maxSize}MB`),!0;if(!e.imageProps.type.toLowerCase().split(",").includes(a.target.files[0].name.split(".")[a.target.files[0].name.split(".").length-1].toLowerCase()))return _("Tệp không đúng định dạng"),!0},v=async a=>{if(x(a))return;d.value=!0;const l=new FileReader;l.readAsDataURL(a.target.files[0]),l.onload=b=>{b.target.result&&q({name:a.target.files[0].name,base64:b.target.result}),d.value=!1},g("onUpload",a)},V=async a=>{const l={target:{files:[a.dataTransfer.files[0]]}};a.preventDefault(),v(l)},c=a=>{switch(a){case"image/*":return"ảnh";case"video/*":return"video";default:return"file"}},s=a=>{q(null),g("onRemove",a)};return(a,l)=>{var $;const b=D("ProgressSpinner");return o(),r("div",{class:f(["flex flex-column gap-2",e.class])},[P(t("label",null,[t("span",null,y(e.label),1),P(t("span",Q,"*",512),[[k,e.required]])],512),[[k,e.label]]),t("div",X,[t("div",{class:f([{"p-disabled":e.disabled},"border-1 border-dashed text-main-color border-round-lg overflow-hidden"])},[!i(n)&&!d.value?(o(),r("div",{key:0,class:f([e.class,"relative flex align-items-center justify-content-center"])},[e.miniSize?(o(),r("i",Z)):(o(),r("div",ee,[te,t("span",null,y(`Thêm ${c(e.imageProps.accept)}`),1)])),t("input",{type:"file",class:"absolute top-0 right-0 left-0 bottom-0 opacity-0 on-click",accept:e.imageProps.accept,onDrop:j(V,["prevent"]),onChange:v},null,40,ae)],2)):w("",!0),d.value&&!i(n)?(o(),r("div",{key:1,class:f([e.class,"relative flex justify-content-center align-items-center"])},[t("div",se,[u(b,{style:{width:"40px",height:"40px"},strokeWidth:"3",animationDuration:".5s"}),le])],2)):w("",!0),i(n)&&!d.value?(o(),r("div",{key:2,class:f([e.class,"relative"]),style:C(e.style)},[t("i",{style:{"background-color":"rgba(240, 248, 255, 0.767)"},class:"pi pi-times absolute right-0 p-1 border-round-lg on-click z-5",onClick:l[0]||(l[0]=xe=>s(i(n)))}),e.imageProps.accept==="image/*"?(o(),r("img",{key:0,style:{"object-fit":"contain"},class:"w-full h-full",src:i(n).base64,alt:"Lỗi ảnh"},null,8,ne)):w("",!0),e.imageProps.accept==="video/*"?(o(),r("video",oe,[t("source",{src:i(n).base64,type:"video/mp4"},null,8,re)])):w("",!0),e.imageProps.accept===".rar"?(o(),r("div",ie,[t("div",ce,[ue,t("span",null,y(($=i(n))==null?void 0:$.name),1)])])):w("",!0)],6)):w("",!0)],2),t("small",de,y(i(h)),1)])],2)}}},fe={class:"p-error"},me={class:"flex flex-column gap-1 w-full"},ge={__name:"DropdownValidate",props:{name:{type:String,required:!0,default:""},label:{type:String,required:!1,default:""},options:{type:Array,required:!1,default:""},class:{type:String,required:!1,default:""},style:{type:Object,required:!1,default:()=>{}},disabled:{type:Boolean,required:!1,default:!1},placeholder:{type:String,required:!1,default:""},dropdownProps:{type:Object,required:!1,default:()=>({optionLabel:"name",optionValue:"code",placeholder:"",class:"",required:!0})}},emits:["onChange"],setup(m,{emit:g}){const e=m,{value:n,errorMessage:h,setErrors:_,setValue:q}=N(e.name);return(d,p)=>{const x=D("Dropdown");return o(),r("div",{class:f(["flex flex-column gap-2",e.class]),style:C(e.style)},[t("label",null,[t("span",null,y(e.label),1),P(t("span",fe," *",512),[[k,e.dropdownProps.required]])]),t("div",me,[u(x,{modelValue:i(n),"onUpdate:modelValue":p[0]||(p[0]=v=>U(n)?n.value=v:null),options:e.options,optionLabel:e.dropdownProps.optionLabel,optionValue:e.dropdownProps.optionValue,placeholder:e.placeholder,class:f(e.dropdownProps.class),disabled:e.disabled,onChange:p[1]||(p[1]=v=>g("onChange"))},null,8,["modelValue","options","optionLabel","optionValue","placeholder","class","disabled"]),P(t("small",{class:"p-error"},y(i(h)),513),[[k,i(h)]])])],6)}}};const he={class:"flex flex-column gap-4"},_e={class:"flex flex-wrap-reverse gap-6"},ve={style:{"max-width":"25rem"},class:"flex-1 flex flex-column gap-3"},be={class:"image-container w-25rem flex flex-column gap-3"},ye={__name:"Personal",setup(m){const{onGetterUserInfo:g,onActionGetUserInfo:e,onActionSaveUserInfo:n}=I(),h=M({avatar:null,fullName:"",gender:"",dateOfBirth:null,phoneNumber:null}),_=G(()=>R.value._id),q=z({fullName:S().required("Vui lòng nhập họ và tên"),gender:S().required("Vui lòng chọn giới tính"),dateOfBirth:S().required("Vui lòng nhập ngày sinh"),phoneNumber:S().test("phoneNumber","Vui lòng nhập đúng định dạng số điện thoại",c=>c.length>=10&&c.length<=12&&T(c)).required("Vui lòng nhập số điện thoại")}),{values:d,resetForm:p,setFieldValue:x,handleSubmit:v}=L({initialValues:h,validationSchema:q,keepValuesOnUnmount:!0}),V=v(async()=>{(await n(_.value,d)).success&&e(_.value,!0).then(s=>{s.success&&(A.value.userData=s==null?void 0:s.data)})});return E(g,c=>{const s=c.user;p({values:Object.assign(h,s)}),s.avatar&&x("avatar",{name:s==null?void 0:s.avatar.split("$")[1],base64:s==null?void 0:s.avatar}),s.dateOfBirth&&x("dateOfBirth",H(s.dateOfBirth))}),J(()=>{e(_.value)}),(c,s)=>{const a=D("Button");return o(),r("div",he,[u(W,{icon:"pi pi-user",title:"Thông tin tài khoản"}),t("div",_e,[t("div",ve,[u(B,{label:"Họ và tên",name:"fullName",class:"w-full"}),u(ge,{label:"Giới tính",name:"gender",options:[{name:"Nam",code:"male"},{name:"Nữ",code:"female"},{name:"Khác",code:"other"}]}),u(B,{label:"Ngày sinh",name:"dateOfBirth",class:"w-full"}),u(B,{label:"Số điện thoại",name:"phoneNumber",class:"w-full",type:"number"}),u(a,{label:"Lưu thông tin",onClick:i(V)},null,8,["onClick"])]),t("div",be,[u(pe,{label:"Ảnh đại diện",name:"avatar",class:"image w-10rem h-10rem",required:!1})])])])}}},Se=F(ye,[["__scopeId","data-v-bbf42e53"]]);export{Se as default};
